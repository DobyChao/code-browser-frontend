@import "tailwindcss";

/* 1. 定义 v4 主题 (CSS 变量) */
@theme {
  /* --- 亮色主题 --- */
  --color-bg-default: #ffffff;
  --color-bg-sidebar: #f3f3f3;
  --color-bg-header: #e8e8e8;
  --color-bg-editor: #ffffff;
  --color-bg-input: #ffffff;
  --color-bg-hover: #e8e8e8;
  --color-bg-selected: #0078d4;
  --color-bg-tab: #f3f3f3;
  --color-bg-tab-active: #ffffff;
  
  --color-text-default: #1e1e1e;
  --color-text-dim: #5a5a5a;
  --color-text-selected: #ffffff;
  
  --color-border-default: #dcdcdc;
  --color-border-input: #cecece;

  --color-button: #0078d4;
  --color-button-hover: #005a9e;
}

/* 2. 应用基础样式 (使用原生 CSS 变量) */
body {
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  background-color: var(--color-bg-default);
  color: var(--color-text-default);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* 3. 自定义功能类 */
@layer utilities {
  /* 修复：将 block 改为 inline-block，防止强制换行，
     同时使用 min-w 来确保它至少占满一行。
  */
  .line-highlight {
    @apply bg-yellow-100 inline-block -mx-6 px-6 box-border min-w-[calc(100%+3rem)];
  }

  /* 保持 search-highlight 为 inline */
  .search-highlight {
    @apply bg-yellow-300 rounded-sm px-0.5 inline;
  }

  /* === 改进后的滚动条样式 === */
  /* 默认状态：隐藏滚动条（透明） */
  .no-scrollbar::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }
  
  .no-scrollbar::-webkit-scrollbar-track {
    background: transparent;
  }
  
  .no-scrollbar::-webkit-scrollbar-thumb {
    background-color: transparent;
    border-radius: 4px;
  }

  /* 悬停状态：显示滚动条 */
  .no-scrollbar:hover::-webkit-scrollbar-thumb {
    background-color: rgba(0, 0, 0, 0.2); /* 半透明灰色 */
  }

  /* Firefox 支持 */
  .no-scrollbar {
    scrollbar-width: thin;
    scrollbar-color: transparent transparent;
    transition: scrollbar-color 0.3s; /* 平滑过渡 */
  }

  .no-scrollbar:hover {
    scrollbar-color: rgba(0, 0, 0, 0.2) transparent;
  }
}

/* 4. 自定义 PrismJS 行号插件的样式 */
pre.line-numbers {
	position: relative;
	padding-left: 3.8em;
	counter-reset: linenumber;
}

pre.line-numbers > code {
	position: relative;
	white-space: inherit;
}

.line-numbers .line-numbers-rows {
	position: absolute;
	pointer-events: none;
	top: 0;
	font-size: 100%;
	left: -3.8em;
	width: 3em;
	letter-spacing: -1px;
	border-right: 1px solid var(--color-border-default);
	user-select: none;
	padding-top: 1.5rem;
}

.line-numbers-rows > span {
	display: block;
	counter-increment: linenumber;
}

.line-numbers-rows > span:before {
	content: counter(linenumber);
	color: var(--color-text-dim);
	display: block;
	padding-right: 0.8em;
	text-align: right;
}