@import "tailwindcss";

/* 1. 定义 v4 主题 (CSS 变量) */
@theme {
  /* --- 亮色主题 --- */
  --color-bg-default: #ffffff;
  --color-bg-sidebar: #f3f3f3;
  --color-bg-header: #e8e8e8;
  --color-bg-editor: #ffffff;
  --color-bg-input: #ffffff;
  --color-bg-hover: #e8e8e8;
  --color-bg-selected: #0078d4;
  --color-bg-tab: #f3f3f3;
  --color-bg-tab-active: #ffffff;
  
  --color-text-default: #1e1e1e;
  --color-text-dim: #5a5a5a;
  --color-text-selected: #ffffff;
  
  --color-border-default: #dcdcdc;
  --color-border-input: #cecece;

  --color-button: #0078d4;
  --color-button-hover: #005a9e;
}

/* 2. 应用基础样式 (使用原生 CSS 变量) */
body {
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  background-color: var(--color-bg-default);
  color: var(--color-text-default);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* 3. 自定义功能类 */
@layer utilities {
  /* Monaco 会在整行应用这个类
    我们不再需要 'inline-block' 或复杂的 'min-w'
    只需要一个简单的背景色
  */
  .line-highlight {
    @apply bg-yellow-100;
  }

  /* 保持 search-highlight 为 inline */
  .search-highlight {
    @apply bg-yellow-200 rounded-sm px-0.5 inline;
  }

  /* === 改进后的滚动条样式 === */
  /* 默认状态：隐藏滚动条（透明） */
  .no-scrollbar::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }
  
  .no-scrollbar::-webkit-scrollbar-track {
    background: transparent;
  }
  
  .no-scrollbar::-webkit-scrollbar-thumb {
    background-color: transparent;
    border-radius: 4px;
  }

  /* 悬停状态：显示滚动条 */
  .no-scrollbar:hover::-webkit-scrollbar-thumb {
    background-color: rgba(0, 0, 0, 0.2); /* 半透明灰色 */
  }

  /* Firefox 支持 */
  .no-scrollbar {
    scrollbar-width: thin;
    scrollbar-color: transparent transparent;
    transition: scrollbar-color 0.3s; /* 平滑过渡 */
  }

  .no-scrollbar:hover {
    scrollbar-color: rgba(0, 0, 0, 0.2) transparent;
  }

  /* === 新增：为 resizable panel handle 添加样式 === */
  .panel-handle-horizontal {
    @apply w-full h-0.5 relative bg-transparent cursor-row-resize;
  }
  .panel-handle-horizontal .panel-handle-bar {
    @apply absolute left-0 top-1/2 -translate-y-1/2 w-full h-0.5 bg-border-default transition-colors;
  }
  .panel-handle-horizontal:hover .panel-handle-bar,
  .panel-handle-horizontal:active .panel-handle-bar { 
    @apply bg-blue-400; 
  }

  .panel-handle-vertical {
    @apply h-full w-0.5 relative bg-transparent cursor-col-resize;
  }
  .panel-handle-vertical .panel-handle-bar {
    @apply absolute left-1/2 -translate-x-1/2 top-0 h-full w-0.5 bg-border-default transition-colors;
  }
  .panel-handle-vertical:hover .panel-handle-bar,
  .panel-handle-vertical:active .panel-handle-bar { 
    @apply bg-blue-400; 
  }

  .tooltip {
    position: relative;
  }

  .tooltip[data-tooltip]::after {
    content: attr(data-tooltip);
    position: absolute;
    left: 0;
    top: calc(100% + 6px);
    opacity: 0;
    visibility: hidden;
    pointer-events: none;
    z-index: 50;
    padding: 6px 8px;
    border-radius: 6px;
    background: #ffffff;
    color: #1e1e1e;
    border: 1px solid rgba(0, 0, 0, 0.12);
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
    font-size: 12px;
    line-height: 1.25rem;
    max-width: 480px;
    white-space: pre-wrap;
    word-break: break-word;
    transition: opacity 120ms ease;
  }

  .tooltip[data-tooltip]:hover::after {
    opacity: 1;
    visibility: visible;
    transition-delay: 400ms;
  }
}
